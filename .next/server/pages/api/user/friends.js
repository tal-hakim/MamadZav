"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/friends";
exports.ids = ["pages/api/user/friends"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Ffriends&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cuser%5Cfriends.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Ffriends&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cuser%5Cfriends.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_user_friends_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\user\\friends.ts */ \"(api)/./src/pages/api/user/friends.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_user_friends_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_user_friends_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/friends\",\n        pathname: \"/api/user/friends\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_user_friends_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZmcmllbmRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUN1c2VyJTVDZnJpZW5kcy50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNnRTtBQUNoRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMkRBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDJEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NhZmV0eS1jaGVjay1uZXR3b3JrLz82ZTBhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXHVzZXJcXFxcZnJpZW5kcy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXIvZnJpZW5kc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXIvZnJpZW5kc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Ffriends&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cuser%5Cfriends.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet cached = global.mongoose || {\n    conn: null,\n    promise: null\n};\nif (!global.mongoose) {\n    global.mongoose = cached;\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        // Check if the connection is still valid\n        if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState === 1) {\n            console.log(\"Using cached database connection\");\n            return cached.conn;\n        } else {\n            console.log(\"Cached connection is no longer valid, creating new connection...\");\n            cached.conn = null;\n            cached.promise = null;\n        }\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            serverSelectionTimeoutMS: 10000,\n            socketTimeoutMS: 45000,\n            family: 4,\n            maxPoolSize: 10,\n            minPoolSize: 1,\n            connectTimeoutMS: 10000,\n            retryWrites: true,\n            retryReads: true\n        };\n        try {\n            console.log(\"Creating new database connection...\");\n            const mongooseInstance = (mongoose__WEBPACK_IMPORTED_MODULE_0___default());\n            cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then(()=>{\n                console.log(\"MongoDB connected successfully\");\n                // Handle connection events\n                mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"error\", (err)=>{\n                    console.error(\"MongoDB connection error:\", err);\n                    if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState !== 1) {\n                        cached.conn = null;\n                        cached.promise = null;\n                    }\n                });\n                mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"disconnected\", ()=>{\n                    console.warn(\"MongoDB disconnected\");\n                    if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState !== 1) {\n                        cached.conn = null;\n                        cached.promise = null;\n                    }\n                });\n                mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"connected\", ()=>{\n                    console.log(\"MongoDB connected\");\n                });\n                mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"reconnected\", ()=>{\n                    console.log(\"MongoDB reconnected\");\n                    cached.conn = mongooseInstance;\n                });\n                // Enable debug mode for Mongoose operations in development\n                if (true) {\n                    mongoose__WEBPACK_IMPORTED_MODULE_0___default().set(\"debug\", true);\n                }\n                return mongooseInstance;\n            });\n        } catch (error) {\n            console.error(\"Error creating MongoDB connection:\", error);\n            cached.promise = null;\n            throw error;\n        }\n    } else {\n        console.log(\"Using existing connection promise\");\n    }\n    try {\n        console.log(\"Waiting for connection to be established...\");\n        const maxRetries = 3;\n        let retries = 0;\n        let lastError;\n        while(retries < maxRetries){\n            try {\n                cached.conn = await cached.promise;\n                console.log(\"Connection established successfully\");\n                return cached.conn;\n            } catch (error) {\n                lastError = error;\n                retries++;\n                console.error(`Failed to establish connection (attempt ${retries}/${maxRetries}):`, error);\n                if (retries < maxRetries) {\n                    console.log(`Retrying in ${retries * 2} seconds...`);\n                    await new Promise((resolve)=>setTimeout(resolve, retries * 2000));\n                    cached.promise = null;\n                }\n            }\n        }\n        console.error(\"Max retries reached, could not establish connection\");\n        throw lastError;\n    } catch (error) {\n        console.error(\"Error establishing MongoDB connection:\", error);\n        cached.promise = null;\n        throw error;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUssQ0FBQyxDQUFDLHdDQUF3QyxFQUFFSSxRQUFRLENBQUMsRUFBRUQsV0FBVyxFQUFFLENBQUMsRUFBRUg7Z0JBRXBGLElBQUlJLFVBQVVELFlBQVk7b0JBQ3hCcEIsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFb0IsVUFBVSxFQUFFLFdBQVcsQ0FBQztvQkFDbkQsTUFBTSxJQUFJRSxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTSCxVQUFVO29CQUMzRDVCLE9BQU9HLE9BQU8sR0FBRztnQkFDbkI7WUFDRjtRQUNGO1FBRUFJLFFBQVFpQixLQUFLLENBQUM7UUFDZCxNQUFNSztJQUNSLEVBQUUsT0FBT0wsT0FBTztRQUNkakIsUUFBUWlCLEtBQUssQ0FBQywwQ0FBMENBO1FBQ3hEeEIsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1xQjtJQUNSO0FBQ0Y7QUFFQSxpRUFBZXBCLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWZldHktY2hlY2stbmV0d29yay8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxudHlwZSBDYWNoZWRNb25nb29zZSA9IHtcclxuICBjb25uOiB0eXBlb2YgbW9uZ29vc2UgfCBudWxsO1xyXG4gIHByb21pc2U6IFByb21pc2U8dHlwZW9mIG1vbmdvb3NlPiB8IG51bGw7XHJcbn07XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgdmFyIG1vbmdvb3NlOiBDYWNoZWRNb25nb29zZSB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XHJcbn1cclxuXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgfHwgeyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcblxyXG5pZiAoIWdsb2JhbC5tb25nb29zZSkge1xyXG4gIGdsb2JhbC5tb25nb29zZSA9IGNhY2hlZDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCkge1xyXG4gIGlmIChjYWNoZWQuY29ubikge1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGNvbm5lY3Rpb24gaXMgc3RpbGwgdmFsaWRcclxuICAgIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDEpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGNhY2hlZCBkYXRhYmFzZSBjb25uZWN0aW9uJyk7XHJcbiAgICAgIHJldHVybiBjYWNoZWQuY29ubjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDYWNoZWQgY29ubmVjdGlvbiBpcyBubyBsb25nZXIgdmFsaWQsIGNyZWF0aW5nIG5ldyBjb25uZWN0aW9uLi4uJyk7XHJcbiAgICAgIGNhY2hlZC5jb25uID0gbnVsbDtcclxuICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xyXG4gICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxyXG4gICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDEwMDAwLCAvLyBJbmNyZWFzZWQgdGltZW91dCB0byAxMCBzZWNvbmRzXHJcbiAgICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsIC8vIENsb3NlIHNvY2tldHMgYWZ0ZXIgNDUgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XHJcbiAgICAgIGZhbWlseTogNCwgLy8gVXNlIElQdjQsIHNraXAgdHJ5aW5nIElQdjZcclxuICAgICAgbWF4UG9vbFNpemU6IDEwLFxyXG4gICAgICBtaW5Qb29sU2l6ZTogMSxcclxuICAgICAgY29ubmVjdFRpbWVvdXRNUzogMTAwMDAsXHJcbiAgICAgIHJldHJ5V3JpdGVzOiB0cnVlLFxyXG4gICAgICByZXRyeVJlYWRzOiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbmV3IGRhdGFiYXNlIGNvbm5lY3Rpb24uLi4nKTtcclxuICAgICAgY29uc3QgbW9uZ29vc2VJbnN0YW5jZSA9IG1vbmdvb3NlO1xyXG4gICAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkkhLCBvcHRzKS50aGVuKCgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBjb25uZWN0aW9uIGV2ZW50c1xyXG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOicsIGVycik7XHJcbiAgICAgICAgICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlICE9PSAxKSB7XHJcbiAgICAgICAgICAgIGNhY2hlZC5jb25uID0gbnVsbDtcclxuICAgICAgICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ01vbmdvREIgZGlzY29ubmVjdGVkJyk7XHJcbiAgICAgICAgICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlICE9PSAxKSB7XHJcbiAgICAgICAgICAgIGNhY2hlZC5jb25uID0gbnVsbDtcclxuICAgICAgICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0ZWQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbigncmVjb25uZWN0ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiByZWNvbm5lY3RlZCcpO1xyXG4gICAgICAgICAgY2FjaGVkLmNvbm4gPSBtb25nb29zZUluc3RhbmNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBFbmFibGUgZGVidWcgbW9kZSBmb3IgTW9uZ29vc2Ugb3BlcmF0aW9ucyBpbiBkZXZlbG9wbWVudFxyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICBtb25nb29zZS5zZXQoJ2RlYnVnJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbW9uZ29vc2VJbnN0YW5jZTtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBNb25nb0RCIGNvbm5lY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICBjYWNoZWQucHJvbWlzZSA9IG51bGw7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnVXNpbmcgZXhpc3RpbmcgY29ubmVjdGlvbiBwcm9taXNlJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ1dhaXRpbmcgZm9yIGNvbm5lY3Rpb24gdG8gYmUgZXN0YWJsaXNoZWQuLi4nKTtcclxuICAgIGNvbnN0IG1heFJldHJpZXMgPSAzO1xyXG4gICAgbGV0IHJldHJpZXMgPSAwO1xyXG4gICAgbGV0IGxhc3RFcnJvcjtcclxuXHJcbiAgICB3aGlsZSAocmV0cmllcyA8IG1heFJldHJpZXMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgIHJldHVybiBjYWNoZWQuY29ubjtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcclxuICAgICAgICByZXRyaWVzKys7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGVzdGFibGlzaCBjb25uZWN0aW9uIChhdHRlbXB0ICR7cmV0cmllc30vJHttYXhSZXRyaWVzfSk6YCwgZXJyb3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXRyaWVzIDwgbWF4UmV0cmllcykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYFJldHJ5aW5nIGluICR7cmV0cmllcyAqIDJ9IHNlY29uZHMuLi5gKTtcclxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCByZXRyaWVzICogMjAwMCkpO1xyXG4gICAgICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUuZXJyb3IoJ01heCByZXRyaWVzIHJlYWNoZWQsIGNvdWxkIG5vdCBlc3RhYmxpc2ggY29ubmVjdGlvbicpO1xyXG4gICAgdGhyb3cgbGFzdEVycm9yO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlc3RhYmxpc2hpbmcgTW9uZ29EQiBjb25uZWN0aW9uOicsIGVycm9yKTtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGJDb25uZWN0OyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0IiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJjb25zb2xlIiwibG9nIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiZmFtaWx5IiwibWF4UG9vbFNpemUiLCJtaW5Qb29sU2l6ZSIsImNvbm5lY3RUaW1lb3V0TVMiLCJyZXRyeVdyaXRlcyIsInJldHJ5UmVhZHMiLCJtb25nb29zZUluc3RhbmNlIiwiY29ubmVjdCIsInRoZW4iLCJvbiIsImVyciIsImVycm9yIiwid2FybiIsInNldCIsIm1heFJldHJpZXMiLCJyZXRyaWVzIiwibGFzdEVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api)/./src/lib/logger.ts":
/*!***************************!*\
  !*** ./src/lib/logger.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst LOG_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"logs\");\nconst LOG_FILE = path__WEBPACK_IMPORTED_MODULE_1___default().join(LOG_DIR, \"app.log\");\n// Create logs directory if it doesn't exist\nif (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(LOG_DIR)) {\n    fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(LOG_DIR, {\n        recursive: true\n    });\n}\nfunction formatMessage(level, message, data) {\n    const timestamp = new Date().toISOString();\n    const dataStr = data ? `\\n${JSON.stringify(data, null, 2)}` : \"\";\n    return `[${timestamp}] ${level}: ${message}${dataStr}\\n`;\n}\nconst logger = {\n    info: (message, data)=>{\n        const logMessage = formatMessage(\"INFO\", message, data);\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(LOG_FILE, logMessage);\n        console.log(message, data || \"\");\n    },\n    error: (message, error)=>{\n        const logMessage = formatMessage(\"ERROR\", message, error);\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(LOG_FILE, logMessage);\n        console.error(message, error || \"\");\n    },\n    debug: (message, data)=>{\n        const logMessage = formatMessage(\"DEBUG\", message, data);\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(LOG_FILE, logMessage);\n        console.log(message, data || \"\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2xvZ2dlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvQjtBQUNJO0FBRXhCLE1BQU1FLFVBQVVELGdEQUFTLENBQUNHLFFBQVFDLEdBQUcsSUFBSTtBQUN6QyxNQUFNQyxXQUFXTCxnREFBUyxDQUFDQyxTQUFTO0FBRXBDLDRDQUE0QztBQUM1QyxJQUFJLENBQUNGLG9EQUFhLENBQUNFLFVBQVU7SUFDM0JGLG1EQUFZLENBQUNFLFNBQVM7UUFBRU8sV0FBVztJQUFLO0FBQzFDO0FBRUEsU0FBU0MsY0FBY0MsS0FBYSxFQUFFQyxPQUFlLEVBQUVDLElBQVU7SUFDL0QsTUFBTUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO0lBQ3hDLE1BQU1DLFVBQVVKLE9BQU8sQ0FBQyxFQUFFLEVBQUVLLEtBQUtDLFNBQVMsQ0FBQ04sTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHO0lBQzlELE9BQU8sQ0FBQyxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFSCxNQUFNLEVBQUUsRUFBRUMsUUFBUSxFQUFFSyxRQUFRLEVBQUUsQ0FBQztBQUMxRDtBQUVPLE1BQU1HLFNBQVM7SUFDcEJDLE1BQU0sQ0FBQ1QsU0FBaUJDO1FBQ3RCLE1BQU1TLGFBQWFaLGNBQWMsUUFBUUUsU0FBU0M7UUFDbERiLHdEQUFpQixDQUFDTSxVQUFVZ0I7UUFDNUJFLFFBQVFDLEdBQUcsQ0FBQ2IsU0FBU0MsUUFBUTtJQUMvQjtJQUVBYSxPQUFPLENBQUNkLFNBQWlCYztRQUN2QixNQUFNSixhQUFhWixjQUFjLFNBQVNFLFNBQVNjO1FBQ25EMUIsd0RBQWlCLENBQUNNLFVBQVVnQjtRQUM1QkUsUUFBUUUsS0FBSyxDQUFDZCxTQUFTYyxTQUFTO0lBQ2xDO0lBRUFDLE9BQU8sQ0FBQ2YsU0FBaUJDO1FBQ3ZCLE1BQU1TLGFBQWFaLGNBQWMsU0FBU0UsU0FBU0M7UUFDbkRiLHdEQUFpQixDQUFDTSxVQUFVZ0I7UUFDNUJFLFFBQVFDLEdBQUcsQ0FBQ2IsU0FBU0MsUUFBUTtJQUMvQjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWZldHktY2hlY2stbmV0d29yay8uL3NyYy9saWIvbG9nZ2VyLnRzP2I0OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG5jb25zdCBMT0dfRElSID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdsb2dzJyk7XHJcbmNvbnN0IExPR19GSUxFID0gcGF0aC5qb2luKExPR19ESVIsICdhcHAubG9nJyk7XHJcblxyXG4vLyBDcmVhdGUgbG9ncyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxyXG5pZiAoIWZzLmV4aXN0c1N5bmMoTE9HX0RJUikpIHtcclxuICBmcy5ta2RpclN5bmMoTE9HX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KTogc3RyaW5nIHtcclxuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgY29uc3QgZGF0YVN0ciA9IGRhdGEgPyBgXFxuJHtKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKX1gIDogJyc7XHJcbiAgcmV0dXJuIGBbJHt0aW1lc3RhbXB9XSAke2xldmVsfTogJHttZXNzYWdlfSR7ZGF0YVN0cn1cXG5gO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbG9nZ2VyID0ge1xyXG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGxvZ01lc3NhZ2UgPSBmb3JtYXRNZXNzYWdlKCdJTkZPJywgbWVzc2FnZSwgZGF0YSk7XHJcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhMT0dfRklMRSwgbG9nTWVzc2FnZSk7XHJcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCBkYXRhIHx8ICcnKTtcclxuICB9LFxyXG4gIFxyXG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IGFueSkgPT4ge1xyXG4gICAgY29uc3QgbG9nTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2UoJ0VSUk9SJywgbWVzc2FnZSwgZXJyb3IpO1xyXG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoTE9HX0ZJTEUsIGxvZ01lc3NhZ2UpO1xyXG4gICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCBlcnJvciB8fCAnJyk7XHJcbiAgfSxcclxuICBcclxuICBkZWJ1ZzogKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgY29uc3QgbG9nTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2UoJ0RFQlVHJywgbWVzc2FnZSwgZGF0YSk7XHJcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhMT0dfRklMRSwgbG9nTWVzc2FnZSk7XHJcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCBkYXRhIHx8ICcnKTtcclxuICB9XHJcbn07ICJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJMT0dfRElSIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJMT0dfRklMRSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJmb3JtYXRNZXNzYWdlIiwibGV2ZWwiLCJtZXNzYWdlIiwiZGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRhdGFTdHIiLCJKU09OIiwic3RyaW5naWZ5IiwibG9nZ2VyIiwiaW5mbyIsImxvZ01lc3NhZ2UiLCJhcHBlbmRGaWxlU3luYyIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImRlYnVnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/logger.ts\n");

/***/ }),

/***/ "(api)/./src/middleware/auth.ts":
/*!********************************!*\
  !*** ./src/middleware/auth.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMiddleware: () => (/* binding */ authMiddleware),\n/* harmony export */   generateToken: () => (/* binding */ generateToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/User */ \"(api)/./src/models/User.ts\");\n\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nif (!JWT_SECRET) {\n    throw new Error(\"Please define the JWT_SECRET environment variable inside .env.local\");\n}\nasync function authMiddleware(req, res, next) {\n    try {\n        console.log(\"\\n=== START: Auth Middleware ===\");\n        console.log(\"Method:\", req.method);\n        console.log(\"Path:\", req.url);\n        const authHeader = req.headers.authorization;\n        if (!authHeader?.startsWith(\"Bearer \")) {\n            console.log(\"No token provided\");\n            return res.status(401).json({\n                message: \"No token provided\"\n            });\n        }\n        const token = authHeader.split(\" \")[1];\n        console.log(\"Token received, verifying...\");\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        console.log(\"Token verified, user ID:\", decoded.id);\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findById(decoded.id).select(\"-password\");\n        if (!user) {\n            console.log(\"User not found for ID:\", decoded.id);\n            return res.status(401).json({\n                message: \"User not found\"\n            });\n        }\n        console.log(\"User found:\", user._id);\n        req.user = user;\n        console.log(\"=== END: Auth Middleware ===\\n\");\n        // Call the handler and catch any errors\n        try {\n            await next();\n        } catch (error) {\n            console.error(\"Error in route handler:\", error);\n            return res.status(500).json({\n                message: \"Internal server error\",\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Auth middleware error:\", error);\n        if (error instanceof (jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().JsonWebTokenError)) {\n            return res.status(401).json({\n                message: \"Invalid token\"\n            });\n        } else if (error instanceof (jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().TokenExpiredError)) {\n            return res.status(401).json({\n                message: \"Token expired\"\n            });\n        }\n        return res.status(401).json({\n            message: \"Authentication failed\"\n        });\n    }\n}\nfunction generateToken(userId) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        id: userId\n    }, JWT_SECRET, {\n        expiresIn: \"7d\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbWlkZGxld2FyZS9hdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQytCO0FBQ2E7QUFFNUMsTUFBTUUsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO0FBRXpDLElBQUksQ0FBQ0EsWUFBWTtJQUNmLE1BQU0sSUFBSUcsTUFBTTtBQUNsQjtBQU1PLGVBQWVDLGVBQ3BCQyxHQUF5QixFQUN6QkMsR0FBb0IsRUFDcEJDLElBQXlCO0lBRXpCLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxXQUFXSixJQUFJSyxNQUFNO1FBQ2pDRixRQUFRQyxHQUFHLENBQUMsU0FBU0osSUFBSU0sR0FBRztRQUU1QixNQUFNQyxhQUFhUCxJQUFJUSxPQUFPLENBQUNDLGFBQWE7UUFDNUMsSUFBSSxDQUFDRixZQUFZRyxXQUFXLFlBQVk7WUFDdENQLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9ILElBQUlVLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBb0I7UUFDN0Q7UUFFQSxNQUFNQyxRQUFRUCxXQUFXUSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDdENaLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE1BQU1ZLFVBQVV2QiwwREFBVSxDQUFDcUIsT0FBT25CO1FBQ2xDUSxRQUFRQyxHQUFHLENBQUMsNEJBQTRCWSxRQUFRRSxFQUFFO1FBRWxELE1BQU1DLE9BQU8sTUFBTXpCLDhDQUFJQSxDQUFDMEIsUUFBUSxDQUFDSixRQUFRRSxFQUFFLEVBQUVHLE1BQU0sQ0FBQztRQUNwRCxJQUFJLENBQUNGLE1BQU07WUFDVGhCLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJZLFFBQVFFLEVBQUU7WUFDaEQsT0FBT2pCLElBQUlVLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBaUI7UUFDMUQ7UUFFQVYsUUFBUUMsR0FBRyxDQUFDLGVBQWVlLEtBQUtHLEdBQUc7UUFDbkN0QixJQUFJbUIsSUFBSSxHQUFHQTtRQUVYaEIsUUFBUUMsR0FBRyxDQUFDO1FBRVosd0NBQXdDO1FBQ3hDLElBQUk7WUFDRixNQUFNRjtRQUNSLEVBQUUsT0FBT3FCLE9BQU87WUFDZHBCLFFBQVFvQixLQUFLLENBQUMsMkJBQTJCQTtZQUN6QyxPQUFPdEIsSUFBSVUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLFNBQVM7Z0JBQ1RVLE9BQU9BLGlCQUFpQnpCLFFBQVF5QixNQUFNVixPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGLEVBQUUsT0FBT1UsT0FBTztRQUNkcEIsUUFBUW9CLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLElBQUlBLGlCQUFpQjlCLHVFQUFxQixFQUFFO1lBQzFDLE9BQU9RLElBQUlVLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBZ0I7UUFDekQsT0FBTyxJQUFJVSxpQkFBaUI5Qix1RUFBcUIsRUFBRTtZQUNqRCxPQUFPUSxJQUFJVSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQWdCO1FBQ3pEO1FBQ0EsT0FBT1osSUFBSVUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXdCO0lBQ2pFO0FBQ0Y7QUFFTyxTQUFTYSxjQUFjQyxNQUFjO0lBQzFDLE9BQU9sQyx3REFBUSxDQUFDO1FBQUV5QixJQUFJUztJQUFPLEdBQUdoQyxZQUFZO1FBQUVrQyxXQUFXO0lBQUs7QUFDaEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWZldHktY2hlY2stbmV0d29yay8uL3NyYy9taWRkbGV3YXJlL2F1dGgudHM/YjlhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IHsgVXNlciwgSVVzZXIgfSBmcm9tICdAL21vZGVscy9Vc2VyJztcclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUO1xyXG5cclxuaWYgKCFKV1RfU0VDUkVUKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBKV1RfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXV0aGVudGljYXRlZFJlcXVlc3QgZXh0ZW5kcyBOZXh0QXBpUmVxdWVzdCB7XHJcbiAgdXNlcj86IElVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXV0aE1pZGRsZXdhcmUoXHJcbiAgcmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZSxcclxuICBuZXh0OiAoKSA9PiBQcm9taXNlPHZvaWQ+XHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnXFxuPT09IFNUQVJUOiBBdXRoIE1pZGRsZXdhcmUgPT09Jyk7XHJcbiAgICBjb25zb2xlLmxvZygnTWV0aG9kOicsIHJlcS5tZXRob2QpO1xyXG4gICAgY29uc29sZS5sb2coJ1BhdGg6JywgcmVxLnVybCk7XHJcbiAgICBcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgaWYgKCFhdXRoSGVhZGVyPy5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHRva2VuIHByb3ZpZGVkJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdObyB0b2tlbiBwcm92aWRlZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgICBjb25zb2xlLmxvZygnVG9rZW4gcmVjZWl2ZWQsIHZlcmlmeWluZy4uLicpO1xyXG4gICAgXHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgeyBpZDogc3RyaW5nIH07XHJcbiAgICBjb25zb2xlLmxvZygnVG9rZW4gdmVyaWZpZWQsIHVzZXIgSUQ6JywgZGVjb2RlZC5pZCk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZGVjb2RlZC5pZCkuc2VsZWN0KCctcGFzc3dvcmQnKTtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlciBub3QgZm91bmQgZm9yIElEOicsIGRlY29kZWQuaWQpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdVc2VyIGZvdW5kOicsIHVzZXIuX2lkKTtcclxuICAgIHJlcS51c2VyID0gdXNlcjtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnPT09IEVORDogQXV0aCBNaWRkbGV3YXJlID09PVxcbicpO1xyXG4gICAgXHJcbiAgICAvLyBDYWxsIHRoZSBoYW5kbGVyIGFuZCBjYXRjaCBhbnkgZXJyb3JzXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBuZXh0KCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByb3V0ZSBoYW5kbGVyOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgICAgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBdXRoIG1pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygand0Lkpzb25XZWJUb2tlbkVycm9yKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIHRva2VuJyB9KTtcclxuICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBqd3QuVG9rZW5FeHBpcmVkRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIGV4cGlyZWQnIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VySWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKHsgaWQ6IHVzZXJJZCB9LCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzdkJyB9KTtcclxufSAiXSwibmFtZXMiOlsiand0IiwiVXNlciIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJhdXRoTWlkZGxld2FyZSIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwibWV0aG9kIiwidXJsIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidG9rZW4iLCJzcGxpdCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJpZCIsInVzZXIiLCJmaW5kQnlJZCIsInNlbGVjdCIsIl9pZCIsImVycm9yIiwiSnNvbldlYlRva2VuRXJyb3IiLCJUb2tlbkV4cGlyZWRFcnJvciIsImdlbmVyYXRlVG9rZW4iLCJ1c2VySWQiLCJzaWduIiwiZXhwaXJlc0luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/middleware/auth.ts\n");

/***/ }),

/***/ "(api)/./src/models/User.ts":
/*!****************************!*\
  !*** ./src/models/User.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        trim: true,\n        lowercase: true\n    },\n    username: {\n        type: String,\n        required: true,\n        unique: true,\n        trim: true,\n        lowercase: true,\n        minlength: 3,\n        maxlength: 30,\n        match: [\n            /^[a-zA-Z0-9_]+$/,\n            \"Username can only contain letters, numbers and underscores\"\n        ]\n    },\n    password: {\n        type: String,\n        required: true,\n        minlength: 6\n    },\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    friends: [\n        {\n            type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n            ref: \"User\"\n        }\n    ],\n    friendRequests: [\n        {\n            from: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: \"User\",\n                required: true\n            },\n            createdAt: {\n                type: Date,\n                default: Date.now\n            }\n        }\n    ],\n    lastCheckIn: {\n        type: Date,\n        default: null\n    }\n}, {\n    timestamps: true\n});\n// Hash password before saving\nuserSchema.pre(\"save\", async function(next) {\n    if (!this.isModified(\"password\")) return next();\n    try {\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(this.password, salt);\n        next();\n    } catch (error) {\n        next(error);\n    }\n});\n// Compare password method\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n};\nconst User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0M7QUFDRjtBQWdCOUIsTUFBTUUsYUFBYSxJQUFJRix3REFBZSxDQUFDO0lBQ3JDSSxPQUFPO1FBQ0xDLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLFdBQVc7SUFDYjtJQUNBQyxVQUFVO1FBQ1JOLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLFdBQVc7UUFDWEUsV0FBVztRQUNYQyxXQUFXO1FBQ1hDLE9BQU87WUFBQztZQUFtQjtTQUE2RDtJQUMxRjtJQUNBQyxVQUFVO1FBQ1JWLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkssV0FBVztJQUNiO0lBQ0FJLE1BQU07UUFDSlgsTUFBTUM7UUFDTkMsVUFBVTtRQUNWRSxNQUFNO0lBQ1I7SUFDQVEsU0FBUztRQUFDO1lBQ1JaLE1BQU1MLHdEQUFlLENBQUNrQixLQUFLLENBQUNDLFFBQVE7WUFDcENDLEtBQUs7UUFDUDtLQUFFO0lBQ0ZDLGdCQUFnQjtRQUFDO1lBQ2ZDLE1BQU07Z0JBQ0pqQixNQUFNTCx3REFBZSxDQUFDa0IsS0FBSyxDQUFDQyxRQUFRO2dCQUNwQ0MsS0FBSztnQkFDTGIsVUFBVTtZQUNaO1lBQ0FnQixXQUFXO2dCQUNUbEIsTUFBTW1CO2dCQUNOQyxTQUFTRCxLQUFLRSxHQUFHO1lBQ25CO1FBQ0Y7S0FBRTtJQUNGQyxhQUFhO1FBQ1h0QixNQUFNbUI7UUFDTkMsU0FBUztJQUNYO0FBQ0YsR0FBRztJQUNERyxZQUFZO0FBQ2Q7QUFFQSw4QkFBOEI7QUFDOUIxQixXQUFXMkIsR0FBRyxDQUFDLFFBQVEsZUFBZUMsSUFBSTtJQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDQyxVQUFVLENBQUMsYUFBYSxPQUFPRDtJQUV6QyxJQUFJO1FBQ0YsTUFBTUUsT0FBTyxNQUFNL0IsdURBQWMsQ0FBQztRQUNsQyxJQUFJLENBQUNjLFFBQVEsR0FBRyxNQUFNZCxvREFBVyxDQUFDLElBQUksQ0FBQ2MsUUFBUSxFQUFFaUI7UUFDakRGO0lBQ0YsRUFBRSxPQUFPSyxPQUFPO1FBQ2RMLEtBQUtLO0lBQ1A7QUFDRjtBQUVBLDBCQUEwQjtBQUMxQmpDLFdBQVdrQyxPQUFPLENBQUNDLGVBQWUsR0FBRyxlQUFlQyxpQkFBeUI7SUFDM0UsT0FBT3JDLHVEQUFjLENBQUNxQyxtQkFBbUIsSUFBSSxDQUFDdkIsUUFBUTtBQUN4RDtBQUVPLE1BQU15QixPQUFPeEMsd0RBQWUsQ0FBQ3dDLElBQUksSUFBSXhDLHFEQUFjLENBQVEsUUFBUUUsWUFBWSIsInNvdXJjZXMiOlsid2VicGFjazovL3NhZmV0eS1jaGVjay1uZXR3b3JrLy4vc3JjL21vZGVscy9Vc2VyLnRzPzA5NmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyIGV4dGVuZHMgbW9uZ29vc2UuRG9jdW1lbnQge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICBmcmllbmRzOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZFtdO1xyXG4gIGZyaWVuZFJlcXVlc3RzOiB7XHJcbiAgICBmcm9tOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcclxuICAgIGNyZWF0ZWRBdDogRGF0ZTtcclxuICB9W107XHJcbiAgbGFzdENoZWNrSW46IERhdGUgfCBudWxsO1xyXG4gIGNvbXBhcmVQYXNzd29yZChjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcclxufVxyXG5cclxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIGVtYWlsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIHVuaXF1ZTogdHJ1ZSxcclxuICAgIHRyaW06IHRydWUsXHJcbiAgICBsb3dlcmNhc2U6IHRydWUsXHJcbiAgfSxcclxuICB1c2VybmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB1bmlxdWU6IHRydWUsXHJcbiAgICB0cmltOiB0cnVlLFxyXG4gICAgbG93ZXJjYXNlOiB0cnVlLFxyXG4gICAgbWlubGVuZ3RoOiAzLFxyXG4gICAgbWF4bGVuZ3RoOiAzMCxcclxuICAgIG1hdGNoOiBbL15bYS16QS1aMC05X10rJC8sICdVc2VybmFtZSBjYW4gb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMgYW5kIHVuZGVyc2NvcmVzJ11cclxuICB9LFxyXG4gIHBhc3N3b3JkOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIG1pbmxlbmd0aDogNixcclxuICB9LFxyXG4gIG5hbWU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgdHJpbTogdHJ1ZSxcclxuICB9LFxyXG4gIGZyaWVuZHM6IFt7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdVc2VyJyxcclxuICB9XSxcclxuICBmcmllbmRSZXF1ZXN0czogW3tcclxuICAgIGZyb206IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdVc2VyJyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH0sXHJcbiAgICBjcmVhdGVkQXQ6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgZGVmYXVsdDogRGF0ZS5ub3dcclxuICAgIH1cclxuICB9XSxcclxuICBsYXN0Q2hlY2tJbjoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgfSxcclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWUsXHJcbn0pO1xyXG5cclxuLy8gSGFzaCBwYXNzd29yZCBiZWZvcmUgc2F2aW5nXHJcbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24obmV4dCkge1xyXG4gIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSByZXR1cm4gbmV4dCgpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBzYWx0KTtcclxuICAgIG5leHQoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbmV4dChlcnJvciBhcyBFcnJvcik7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIENvbXBhcmUgcGFzc3dvcmQgbWV0aG9kXHJcbnVzZXJTY2hlbWEubWV0aG9kcy5jb21wYXJlUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbihjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKGNhbmRpZGF0ZVBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWw8SVVzZXI+KCdVc2VyJywgdXNlclNjaGVtYSk7ICJdLCJuYW1lcyI6WyJtb25nb29zZSIsImJjcnlwdCIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJlbWFpbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInRyaW0iLCJsb3dlcmNhc2UiLCJ1c2VybmFtZSIsIm1pbmxlbmd0aCIsIm1heGxlbmd0aCIsIm1hdGNoIiwicGFzc3dvcmQiLCJuYW1lIiwiZnJpZW5kcyIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJmcmllbmRSZXF1ZXN0cyIsImZyb20iLCJjcmVhdGVkQXQiLCJEYXRlIiwiZGVmYXVsdCIsIm5vdyIsImxhc3RDaGVja0luIiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc01vZGlmaWVkIiwic2FsdCIsImdlblNhbHQiLCJoYXNoIiwiZXJyb3IiLCJtZXRob2RzIiwiY29tcGFyZVBhc3N3b3JkIiwiY2FuZGlkYXRlUGFzc3dvcmQiLCJjb21wYXJlIiwiVXNlciIsIm1vZGVscyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/models/User.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/user/friends.ts":
/*!***************************************!*\
  !*** ./src/pages/api/user/friends.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/User */ \"(api)/./src/models/User.ts\");\n/* harmony import */ var _middleware_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/middleware/auth */ \"(api)/./src/middleware/auth.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/logger */ \"(api)/./src/lib/logger.ts\");\n\n\n\n\nasync function handler(req, res) {\n    console.log(\"Friends API called with method:\", req.method);\n    if (![\n        \"GET\",\n        \"POST\",\n        \"DELETE\",\n        \"PUT\",\n        \"PATCH\"\n    ].includes(req.method || \"\")) {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        // Connect to database\n        try {\n            console.log(\"Attempting to connect to MongoDB...\");\n            await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            console.log(\"Successfully connected to MongoDB\");\n        } catch (error) {\n            console.error(\"Database connection error:\", error);\n            return res.status(500).json({\n                message: \"Database connection failed\",\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n        if (!req.user) {\n            console.log(\"No user found in request\");\n            return res.status(401).json({\n                message: \"Not authenticated\"\n            });\n        }\n        console.log(\"User found in request:\", req.user._id);\n        const user = req.user;\n        // GET: Fetch friends list and friend requests\n        if (req.method === \"GET\") {\n            try {\n                // First try to find the user without population to ensure they exist\n                console.log(\"Looking up user:\", user._id);\n                const userExists = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findById(user._id);\n                if (!userExists) {\n                    console.error(\"User not found in database:\", user._id);\n                    return res.status(404).json({\n                        message: \"User not found\"\n                    });\n                }\n                console.log(\"Found user in database\");\n                // Then populate the data\n                console.log(\"Populating user data...\");\n                const userWithData = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findById(user._id).populate({\n                    path: \"friends\",\n                    select: \"name email username lastCheckIn\"\n                }).populate({\n                    path: \"friendRequests.from\",\n                    select: \"name email username\"\n                }).select(\"friends friendRequests\").lean();\n                if (!userWithData) {\n                    console.error(\"Failed to populate user data:\", user._id);\n                    return res.status(500).json({\n                        message: \"Failed to fetch user data\"\n                    });\n                }\n                console.log(\"Successfully populated user data\");\n                // Safely map friends with error handling\n                console.log(\"Raw friends data:\", userWithData.friends);\n                const friends = (userWithData.friends || []).filter((friend)=>friend && friend._id).map((friend)=>({\n                        id: friend._id.toString(),\n                        name: friend.name,\n                        username: friend.username,\n                        email: friend.email,\n                        lastCheckIn: friend.lastCheckIn\n                    }));\n                console.log(\"Processed friends:\", friends.length);\n                // Safely map friend requests with error handling\n                console.log(\"Raw friend requests data:\", userWithData.friendRequests);\n                const friendRequests = (userWithData.friendRequests || []).filter((request)=>request && request.from && request.from._id).map((request)=>({\n                        id: request.from._id.toString(),\n                        name: request.from.name,\n                        username: request.from.username || \"\",\n                        email: request.from.email,\n                        createdAt: request.createdAt\n                    }));\n                console.log(\"Processed friend requests:\", friendRequests.length);\n                return res.status(200).json({\n                    friends,\n                    friendRequests\n                });\n            } catch (error) {\n                console.error(\"Error fetching friends and requests:\", error);\n                return res.status(500).json({\n                    message: \"Error fetching friends and requests\",\n                    error: error instanceof Error ? error.message : \"Unknown error\"\n                });\n            }\n        }\n        const { username } = req.body;\n        if (!username) {\n            return res.status(400).json({\n                message: \"Username is required\"\n            });\n        }\n        // POST: Send a friend request\n        if (req.method === \"POST\") {\n            try {\n                // Check if friend exists\n                const friend = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findOne({\n                    username: username.toLowerCase()\n                });\n                if (!friend) {\n                    return res.status(404).json({\n                        message: \"User not found\"\n                    });\n                }\n                // Can't add yourself\n                if (friend._id.toString() === user._id.toString()) {\n                    return res.status(400).json({\n                        message: \"Cannot add yourself as a friend\"\n                    });\n                }\n                // Check if already friends\n                const areFriends = user.friends.some((friendId)=>friendId.toString() === friend._id.toString());\n                if (areFriends) {\n                    return res.status(400).json({\n                        message: \"Already friends\"\n                    });\n                }\n                // Check if friend request already sent\n                const existingRequest = friend.friendRequests.find((request)=>request.from.toString() === user._id.toString());\n                if (existingRequest) {\n                    return res.status(400).json({\n                        message: \"Friend request already sent\"\n                    });\n                }\n                // Check if they sent you a request\n                const theirRequest = user.friendRequests.find((request)=>request.from.toString() === friend._id.toString());\n                if (theirRequest) {\n                    return res.status(400).json({\n                        message: \"This user has already sent you a friend request. Check your friend requests to accept it.\"\n                    });\n                }\n                // Add friend request\n                await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(friend._id, {\n                    $push: {\n                        friendRequests: {\n                            from: user._id,\n                            createdAt: new Date()\n                        }\n                    }\n                }, {\n                    new: true\n                });\n                return res.status(200).json({\n                    message: \"Friend request sent successfully\"\n                });\n            } catch (error) {\n                console.error(\"Error sending friend request:\", error);\n                return res.status(500).json({\n                    message: \"Error sending friend request\"\n                });\n            }\n        }\n        // PUT: Accept a friend request\n        if (req.method === \"PUT\") {\n            try {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"=== START: Friend Request Acceptance ===\");\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Request body:\", req.body);\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Username from request:\", username);\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Current user:\", {\n                    id: user._id,\n                    username: user.username\n                });\n                if (!username) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"No username provided in request\");\n                    return res.status(400).json({\n                        message: \"Username is required\"\n                    });\n                }\n                // First get the fully populated user document to access friend request details\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Fetching current user with populated data...\");\n                const currentUser = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findById(user._id).populate({\n                    path: \"friendRequests.from\",\n                    select: \"name email username\"\n                }).exec();\n                if (!currentUser) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Could not find current user with populated data\");\n                    return res.status(500).json({\n                        message: \"Error loading user data\"\n                    });\n                }\n                // Find the friend by username first\n                const friend = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findOne({\n                    username: username.toLowerCase()\n                });\n                if (!friend) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Friend not found with username:\", username);\n                    return res.status(404).json({\n                        message: \"User not found\"\n                    });\n                }\n                // Check if friend request exists by ID\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Looking for friend request...\");\n                const pendingRequest = currentUser.friendRequests.find((request)=>request.from._id.toString() === friend._id.toString());\n                if (!pendingRequest) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"No friend request found for user:\", {\n                        friendId: friend._id,\n                        username: friend.username,\n                        availableRequests: currentUser.friendRequests.map((r)=>({\n                                id: r.from._id,\n                                username: r.from.username\n                            }))\n                    });\n                    return res.status(400).json({\n                        message: \"No friend request found from this user\",\n                        debug: {\n                            requestedUsername: username,\n                            availableRequests: currentUser.friendRequests.map((r)=>r.from.username)\n                        }\n                    });\n                }\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Found pending request:\", {\n                    from: {\n                        id: pendingRequest.from._id,\n                        username: friend.username\n                    }\n                });\n                // Update both users\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Updating both users...\");\n                try {\n                    const [updatedUser] = await Promise.all([\n                        _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(currentUser._id, {\n                            $push: {\n                                friends: friend._id\n                            },\n                            $pull: {\n                                friendRequests: {\n                                    from: friend._id\n                                }\n                            }\n                        }, {\n                            new: true\n                        }).exec(),\n                        _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(friend._id, {\n                            $push: {\n                                friends: currentUser._id\n                            }\n                        }, {\n                            new: true\n                        }).exec()\n                    ]);\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Updates successful\");\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Updated user friends:\", updatedUser?.friends);\n                    return res.status(200).json({\n                        message: \"Friend request accepted successfully\",\n                        friend: {\n                            id: friend._id,\n                            name: friend.name,\n                            username: friend.username,\n                            email: friend.email\n                        }\n                    });\n                } catch (updateError) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Error during user updates:\", updateError);\n                    throw updateError;\n                }\n            } catch (error) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Error accepting friend request:\", error);\n                return res.status(500).json({\n                    message: \"Error accepting friend request\",\n                    error: error instanceof Error ? error.message : \"Unknown error\"\n                });\n            }\n        }\n        // DELETE: Reject/remove a friend request\n        if (req.method === \"DELETE\") {\n            try {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"=== START: Friend Request Rejection ===\");\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Request body:\", req.body);\n                const { username, userId } = req.body;\n                if (!username && !userId) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"No username or userId provided\");\n                    return res.status(400).json({\n                        message: \"Username or userId is required\"\n                    });\n                }\n                // First get the fully populated user document\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Fetching current user with populated data...\");\n                const currentUser = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findById(user._id).populate({\n                    path: \"friendRequests.from\",\n                    select: \"name email username\"\n                }).exec();\n                if (!currentUser) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Could not find current user with populated data\");\n                    return res.status(500).json({\n                        message: \"Error loading user data\"\n                    });\n                }\n                let requestToRemove;\n                if (userId) {\n                    // Find by ID\n                    requestToRemove = currentUser.friendRequests.find((request)=>request.from._id.toString() === userId);\n                } else {\n                    // Find by username\n                    requestToRemove = currentUser.friendRequests.find((request)=>request.from.username?.toLowerCase() === username.toLowerCase());\n                }\n                if (!requestToRemove) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"No friend request found to reject:\", {\n                        username,\n                        userId\n                    });\n                    return res.status(400).json({\n                        message: \"No friend request found from this user\"\n                    });\n                }\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"Found request to remove:\", {\n                    from: {\n                        id: requestToRemove.from._id,\n                        name: requestToRemove.from.name,\n                        email: requestToRemove.from.email\n                    }\n                });\n                // Remove the request\n                await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(currentUser._id, {\n                    $pull: {\n                        friendRequests: {\n                            from: requestToRemove.from._id\n                        }\n                    }\n                }, {\n                    new: true\n                });\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Friend request rejected successfully\");\n                return res.status(200).json({\n                    message: \"Friend request rejected\"\n                });\n            } catch (error) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Error rejecting friend request:\", error);\n                return res.status(500).json({\n                    message: \"Error rejecting friend request\"\n                });\n            }\n        }\n        // PATCH: Update user (temporary endpoint for fixing lilo's username)\n        if (req.method === \"PATCH\") {\n            try {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"=== START: User Update ===\");\n                // Only allow updating lilo's record\n                const liloId = \"684ebc174ef1c1e06472b747\";\n                const updatedUser = await _models_User__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(liloId, {\n                    $set: {\n                        username: \"lilo_stitch\"\n                    }\n                }, {\n                    new: true\n                });\n                if (!updatedUser) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Could not find lilo's user record\");\n                    return res.status(404).json({\n                        message: \"User not found\"\n                    });\n                }\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Successfully updated lilo's username\");\n                return res.status(200).json({\n                    message: \"Username updated successfully\",\n                    user: {\n                        id: updatedUser._id,\n                        name: updatedUser.name,\n                        username: updatedUser.username,\n                        email: updatedUser.email\n                    }\n                });\n            } catch (error) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Error updating user:\", error);\n                return res.status(500).json({\n                    message: \"Error updating user\"\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"Friends operation error:\", error);\n        return res.status(500).json({\n            message: \"Error processing friends operation\"\n        });\n    }\n}\nfunction withAuth(req, res) {\n    return (0,_middleware_auth__WEBPACK_IMPORTED_MODULE_2__.authMiddleware)(req, res, ()=>handler(req, res));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T25CLE9BQU87Z0JBQ2RYLCtDQUFNQSxDQUFDVyxLQUFLLENBQUMsd0JBQXdCQTtnQkFDckMsT0FBT1IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsU0FBUztnQkFBc0I7WUFDL0Q7UUFDRjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPUixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUM7SUFDOUU7QUFDRjtBQUVlLFNBQVN5RCxTQUN0QmpFLEdBQXlCLEVBQ3pCQyxHQUFvQjtJQUVwQixPQUFPSixnRUFBY0EsQ0FBQ0csS0FBS0MsS0FBSyxJQUFNRixRQUFRQyxLQUFLQztBQUNyRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NhZmV0eS1jaGVjay1uZXR3b3JrLy4vc3JjL3BhZ2VzL2FwaS91c2VyL2ZyaWVuZHMudHM/YTg5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBkYkNvbm5lY3QgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgVXNlciwgSVVzZXIgfSBmcm9tICdAL21vZGVscy9Vc2VyJztcbmltcG9ydCB7IGF1dGhNaWRkbGV3YXJlLCBBdXRoZW50aWNhdGVkUmVxdWVzdCB9IGZyb20gJ0AvbWlkZGxld2FyZS9hdXRoJztcbmltcG9ydCB7IFR5cGVzIH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvbGliL2xvZ2dlcic7XG5cbmludGVyZmFjZSBGcmllbmRSZXF1ZXN0IHtcbiAgZnJvbToge1xuICAgIF9pZDogVHlwZXMuT2JqZWN0SWQ7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgfTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xufVxuXG5pbnRlcmZhY2UgUG9wdWxhdGVkVXNlciBleHRlbmRzIE9taXQ8SVVzZXIsICdmcmllbmRzJyB8ICdmcmllbmRSZXF1ZXN0cyc+IHtcbiAgX2lkOiBUeXBlcy5PYmplY3RJZDtcbiAgZnJpZW5kczogQXJyYXk8e1xuICAgIF9pZDogVHlwZXMuT2JqZWN0SWQ7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBsYXN0Q2hlY2tJbjogRGF0ZSB8IG51bGw7XG4gIH0+O1xuICBmcmllbmRSZXF1ZXN0czogRnJpZW5kUmVxdWVzdFtdO1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKSB7XG4gIGNvbnNvbGUubG9nKCdGcmllbmRzIEFQSSBjYWxsZWQgd2l0aCBtZXRob2Q6JywgcmVxLm1ldGhvZCk7XG5cbiAgaWYgKCFbJ0dFVCcsICdQT1NUJywgJ0RFTEVURScsICdQVVQnLCAnUEFUQ0gnXS5pbmNsdWRlcyhyZXEubWV0aG9kIHx8ICcnKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBDb25uZWN0IHRvIGRhdGFiYXNlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIGNvbm5lY3QgdG8gTW9uZ29EQi4uLicpO1xuICAgICAgYXdhaXQgZGJDb25uZWN0KCk7XG4gICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBNb25nb0RCJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFyZXEudXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ05vIHVzZXIgZm91bmQgaW4gcmVxdWVzdCcpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ05vdCBhdXRoZW50aWNhdGVkJyB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnVXNlciBmb3VuZCBpbiByZXF1ZXN0OicsIHJlcS51c2VyLl9pZCk7XG4gICAgY29uc3QgdXNlciA9IHJlcS51c2VyIGFzIElVc2VyICYgeyBfaWQ6IFR5cGVzLk9iamVjdElkIH07XG5cbiAgICAvLyBHRVQ6IEZldGNoIGZyaWVuZHMgbGlzdCBhbmQgZnJpZW5kIHJlcXVlc3RzXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGaXJzdCB0cnkgdG8gZmluZCB0aGUgdXNlciB3aXRob3V0IHBvcHVsYXRpb24gdG8gZW5zdXJlIHRoZXkgZXhpc3RcbiAgICAgICAgY29uc29sZS5sb2coJ0xvb2tpbmcgdXAgdXNlcjonLCB1c2VyLl9pZCk7XG4gICAgICAgIGNvbnN0IHVzZXJFeGlzdHMgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXIuX2lkKTtcbiAgICAgICAgaWYgKCF1c2VyRXhpc3RzKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2U6JywgdXNlci5faWQpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIHVzZXIgaW4gZGF0YWJhc2UnKTtcblxuICAgICAgICAvLyBUaGVuIHBvcHVsYXRlIHRoZSBkYXRhXG4gICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0aW5nIHVzZXIgZGF0YS4uLicpO1xuICAgICAgICBjb25zdCB1c2VyV2l0aERhdGEgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXIuX2lkKVxuICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICBwYXRoOiAnZnJpZW5kcycsXG4gICAgICAgICAgICBzZWxlY3Q6ICduYW1lIGVtYWlsIHVzZXJuYW1lIGxhc3RDaGVja0luJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgIHBhdGg6ICdmcmllbmRSZXF1ZXN0cy5mcm9tJyxcbiAgICAgICAgICAgIHNlbGVjdDogJ25hbWUgZW1haWwgdXNlcm5hbWUnXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc2VsZWN0KCdmcmllbmRzIGZyaWVuZFJlcXVlc3RzJylcbiAgICAgICAgICAubGVhbigpIGFzIFBvcHVsYXRlZFVzZXIgfCBudWxsO1xuXG4gICAgICAgIGlmICghdXNlcldpdGhEYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBvcHVsYXRlIHVzZXIgZGF0YTonLCB1c2VyLl9pZCk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCB1c2VyIGRhdGEnIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgcG9wdWxhdGVkIHVzZXIgZGF0YScpO1xuXG4gICAgICAgIC8vIFNhZmVseSBtYXAgZnJpZW5kcyB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIGNvbnNvbGUubG9nKCdSYXcgZnJpZW5kcyBkYXRhOicsIHVzZXJXaXRoRGF0YS5mcmllbmRzKTtcbiAgICAgICAgY29uc3QgZnJpZW5kcyA9ICh1c2VyV2l0aERhdGEuZnJpZW5kcyB8fCBbXSlcbiAgICAgICAgICAuZmlsdGVyKGZyaWVuZCA9PiBmcmllbmQgJiYgZnJpZW5kLl9pZClcbiAgICAgICAgICAubWFwKGZyaWVuZCA9PiAoe1xuICAgICAgICAgICAgaWQ6IGZyaWVuZC5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IGZyaWVuZC5uYW1lLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGZyaWVuZC51c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBmcmllbmQuZW1haWwsXG4gICAgICAgICAgICBsYXN0Q2hlY2tJbjogZnJpZW5kLmxhc3RDaGVja0luLFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NlZCBmcmllbmRzOicsIGZyaWVuZHMubGVuZ3RoKTtcblxuICAgICAgICAvLyBTYWZlbHkgbWFwIGZyaWVuZCByZXF1ZXN0cyB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIGNvbnNvbGUubG9nKCdSYXcgZnJpZW5kIHJlcXVlc3RzIGRhdGE6JywgdXNlcldpdGhEYXRhLmZyaWVuZFJlcXVlc3RzKTtcbiAgICAgICAgY29uc3QgZnJpZW5kUmVxdWVzdHMgPSAodXNlcldpdGhEYXRhLmZyaWVuZFJlcXVlc3RzIHx8IFtdKVxuICAgICAgICAgIC5maWx0ZXIocmVxdWVzdCA9PiByZXF1ZXN0ICYmIHJlcXVlc3QuZnJvbSAmJiByZXF1ZXN0LmZyb20uX2lkKVxuICAgICAgICAgIC5tYXAocmVxdWVzdCA9PiAoe1xuICAgICAgICAgICAgaWQ6IHJlcXVlc3QuZnJvbS5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QuZnJvbS5uYW1lLFxuICAgICAgICAgICAgdXNlcm5hbWU6IHJlcXVlc3QuZnJvbS51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGVtYWlsOiByZXF1ZXN0LmZyb20uZW1haWwsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHJlcXVlc3QuY3JlYXRlZEF0LFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NlZCBmcmllbmQgcmVxdWVzdHM6JywgZnJpZW5kUmVxdWVzdHMubGVuZ3RoKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBmcmllbmRzLCBmcmllbmRSZXF1ZXN0cyB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGZyaWVuZHMgYW5kIHJlcXVlc3RzOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGZldGNoaW5nIGZyaWVuZHMgYW5kIHJlcXVlc3RzJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VybmFtZSB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlcm5hbWUgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIFBPU1Q6IFNlbmQgYSBmcmllbmQgcmVxdWVzdFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGZyaWVuZCBleGlzdHNcbiAgICAgICAgY29uc3QgZnJpZW5kID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IHVzZXJuYW1lLnRvTG93ZXJDYXNlKCkgfSk7XG4gICAgICAgIGlmICghZnJpZW5kKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbid0IGFkZCB5b3Vyc2VsZlxuICAgICAgICBpZiAoZnJpZW5kLl9pZC50b1N0cmluZygpID09PSB1c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Nhbm5vdCBhZGQgeW91cnNlbGYgYXMgYSBmcmllbmQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBmcmllbmRzXG4gICAgICAgIGNvbnN0IGFyZUZyaWVuZHMgPSB1c2VyLmZyaWVuZHMuc29tZShcbiAgICAgICAgICAoZnJpZW5kSWQ6IFR5cGVzLk9iamVjdElkKSA9PiBmcmllbmRJZC50b1N0cmluZygpID09PSBmcmllbmQuX2lkLnRvU3RyaW5nKClcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGFyZUZyaWVuZHMpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnQWxyZWFkeSBmcmllbmRzJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGZyaWVuZCByZXF1ZXN0IGFscmVhZHkgc2VudFxuICAgICAgICBjb25zdCBleGlzdGluZ1JlcXVlc3QgPSBmcmllbmQuZnJpZW5kUmVxdWVzdHMuZmluZChcbiAgICAgICAgICAocmVxdWVzdDogYW55KSA9PiByZXF1ZXN0LmZyb20udG9TdHJpbmcoKSA9PT0gdXNlci5faWQudG9TdHJpbmcoKVxuICAgICAgICApO1xuICAgICAgICBpZiAoZXhpc3RpbmdSZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0ZyaWVuZCByZXF1ZXN0IGFscmVhZHkgc2VudCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGV5IHNlbnQgeW91IGEgcmVxdWVzdFxuICAgICAgICBjb25zdCB0aGVpclJlcXVlc3QgPSB1c2VyLmZyaWVuZFJlcXVlc3RzLmZpbmQoXG4gICAgICAgICAgKHJlcXVlc3Q6IGFueSkgPT4gcmVxdWVzdC5mcm9tLnRvU3RyaW5nKCkgPT09IGZyaWVuZC5faWQudG9TdHJpbmcoKVxuICAgICAgICApO1xuICAgICAgICBpZiAodGhlaXJSZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhpcyB1c2VyIGhhcyBhbHJlYWR5IHNlbnQgeW91IGEgZnJpZW5kIHJlcXVlc3QuIENoZWNrIHlvdXIgZnJpZW5kIHJlcXVlc3RzIHRvIGFjY2VwdCBpdC4nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgZnJpZW5kIHJlcXVlc3RcbiAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShmcmllbmQuX2lkLCB7XG4gICAgICAgICAgJHB1c2g6IHsgXG4gICAgICAgICAgICBmcmllbmRSZXF1ZXN0czoge1xuICAgICAgICAgICAgICBmcm9tOiB1c2VyLl9pZCxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSwgeyBuZXc6IHRydWUgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ0ZyaWVuZCByZXF1ZXN0IHNlbnQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgZnJpZW5kIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3Igc2VuZGluZyBmcmllbmQgcmVxdWVzdCcgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUFVUOiBBY2NlcHQgYSBmcmllbmQgcmVxdWVzdFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUFVUJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oJz09PSBTVEFSVDogRnJpZW5kIFJlcXVlc3QgQWNjZXB0YW5jZSA9PT0nKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdSZXF1ZXN0IGJvZHk6JywgcmVxLmJvZHkpO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1VzZXJuYW1lIGZyb20gcmVxdWVzdDonLCB1c2VybmFtZSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3VycmVudCB1c2VyOicsIHsgaWQ6IHVzZXIuX2lkLCB1c2VybmFtZTogdXNlci51c2VybmFtZSB9KTtcblxuICAgICAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyB1c2VybmFtZSBwcm92aWRlZCBpbiByZXF1ZXN0Jyk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXJuYW1lIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcnN0IGdldCB0aGUgZnVsbHkgcG9wdWxhdGVkIHVzZXIgZG9jdW1lbnQgdG8gYWNjZXNzIGZyaWVuZCByZXF1ZXN0IGRldGFpbHNcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdGZXRjaGluZyBjdXJyZW50IHVzZXIgd2l0aCBwb3B1bGF0ZWQgZGF0YS4uLicpO1xuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlci5faWQpXG4gICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgIHBhdGg6ICdmcmllbmRSZXF1ZXN0cy5mcm9tJyxcbiAgICAgICAgICAgIHNlbGVjdDogJ25hbWUgZW1haWwgdXNlcm5hbWUnXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXhlYygpO1xuXG4gICAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGN1cnJlbnQgdXNlciB3aXRoIHBvcHVsYXRlZCBkYXRhJyk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGxvYWRpbmcgdXNlciBkYXRhJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIGZyaWVuZCBieSB1c2VybmFtZSBmaXJzdFxuICAgICAgICBjb25zdCBmcmllbmQgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogdXNlcm5hbWUudG9Mb3dlckNhc2UoKSB9KTtcbiAgICAgICAgaWYgKCFmcmllbmQpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZyaWVuZCBub3QgZm91bmQgd2l0aCB1c2VybmFtZTonLCB1c2VybmFtZSk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGZyaWVuZCByZXF1ZXN0IGV4aXN0cyBieSBJRFxuICAgICAgICBsb2dnZXIuZGVidWcoJ0xvb2tpbmcgZm9yIGZyaWVuZCByZXF1ZXN0Li4uJyk7XG4gICAgICAgIGNvbnN0IHBlbmRpbmdSZXF1ZXN0ID0gY3VycmVudFVzZXIuZnJpZW5kUmVxdWVzdHMuZmluZChcbiAgICAgICAgICAocmVxdWVzdCkgPT4gcmVxdWVzdC5mcm9tLl9pZC50b1N0cmluZygpID09PSBmcmllbmQuX2lkLnRvU3RyaW5nKClcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyBmcmllbmQgcmVxdWVzdCBmb3VuZCBmb3IgdXNlcjonLCB7XG4gICAgICAgICAgICBmcmllbmRJZDogZnJpZW5kLl9pZCxcbiAgICAgICAgICAgIHVzZXJuYW1lOiBmcmllbmQudXNlcm5hbWUsXG4gICAgICAgICAgICBhdmFpbGFibGVSZXF1ZXN0czogY3VycmVudFVzZXIuZnJpZW5kUmVxdWVzdHMubWFwKHIgPT4gKHtcbiAgICAgICAgICAgICAgaWQ6IHIuZnJvbS5faWQsXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiByLmZyb20udXNlcm5hbWVcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgICAgbWVzc2FnZTogJ05vIGZyaWVuZCByZXF1ZXN0IGZvdW5kIGZyb20gdGhpcyB1c2VyJyxcbiAgICAgICAgICAgIGRlYnVnOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RlZFVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgYXZhaWxhYmxlUmVxdWVzdHM6IGN1cnJlbnRVc2VyLmZyaWVuZFJlcXVlc3RzLm1hcChyID0+IHIuZnJvbS51c2VybmFtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRm91bmQgcGVuZGluZyByZXF1ZXN0OicsIHtcbiAgICAgICAgICBmcm9tOiB7XG4gICAgICAgICAgICBpZDogcGVuZGluZ1JlcXVlc3QuZnJvbS5faWQsXG4gICAgICAgICAgICB1c2VybmFtZTogZnJpZW5kLnVzZXJuYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVcGRhdGUgYm90aCB1c2Vyc1xuICAgICAgICBsb2dnZXIuaW5mbygnVXBkYXRpbmcgYm90aCB1c2Vycy4uLicpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IFt1cGRhdGVkVXNlcl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgICAgICBjdXJyZW50VXNlci5faWQsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkcHVzaDogeyBmcmllbmRzOiBmcmllbmQuX2lkIH0sXG4gICAgICAgICAgICAgICAgJHB1bGw6IHsgZnJpZW5kUmVxdWVzdHM6IHsgZnJvbTogZnJpZW5kLl9pZCB9IH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICAgICAgICAgKS5leGVjKCksXG4gICAgICAgICAgICBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgICAgICBmcmllbmQuX2lkLFxuICAgICAgICAgICAgICB7ICRwdXNoOiB7IGZyaWVuZHM6IGN1cnJlbnRVc2VyLl9pZCB9IH0sXG4gICAgICAgICAgICAgIHsgbmV3OiB0cnVlIH1cbiAgICAgICAgICAgICkuZXhlYygpXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBsb2dnZXIuaW5mbygnVXBkYXRlcyBzdWNjZXNzZnVsJyk7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKCdVcGRhdGVkIHVzZXIgZnJpZW5kczonLCB1cGRhdGVkVXNlcj8uZnJpZW5kcyk7XG5cbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGcmllbmQgcmVxdWVzdCBhY2NlcHRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgZnJpZW5kOiB7XG4gICAgICAgICAgICAgIGlkOiBmcmllbmQuX2lkLFxuICAgICAgICAgICAgICBuYW1lOiBmcmllbmQubmFtZSxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IGZyaWVuZC51c2VybmFtZSxcbiAgICAgICAgICAgICAgZW1haWw6IGZyaWVuZC5lbWFpbFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZHVyaW5nIHVzZXIgdXBkYXRlczonLCB1cGRhdGVFcnJvcik7XG4gICAgICAgICAgdGhyb3cgdXBkYXRlRXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgYWNjZXB0aW5nIGZyaWVuZCByZXF1ZXN0OicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGFjY2VwdGluZyBmcmllbmQgcmVxdWVzdCcsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERFTEVURTogUmVqZWN0L3JlbW92ZSBhIGZyaWVuZCByZXF1ZXN0XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdERUxFVEUnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBsb2dnZXIuaW5mbygnPT09IFNUQVJUOiBGcmllbmQgUmVxdWVzdCBSZWplY3Rpb24gPT09Jyk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnUmVxdWVzdCBib2R5OicsIHJlcS5ib2R5KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIHVzZXJJZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXVzZXJuYW1lICYmICF1c2VySWQpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHVzZXJuYW1lIG9yIHVzZXJJZCBwcm92aWRlZCcpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VybmFtZSBvciB1c2VySWQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyc3QgZ2V0IHRoZSBmdWxseSBwb3B1bGF0ZWQgdXNlciBkb2N1bWVudFxuICAgICAgICBsb2dnZXIuZGVidWcoJ0ZldGNoaW5nIGN1cnJlbnQgdXNlciB3aXRoIHBvcHVsYXRlZCBkYXRhLi4uJyk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VyLl9pZClcbiAgICAgICAgICAucG9wdWxhdGUoe1xuICAgICAgICAgICAgcGF0aDogJ2ZyaWVuZFJlcXVlc3RzLmZyb20nLFxuICAgICAgICAgICAgc2VsZWN0OiAnbmFtZSBlbWFpbCB1c2VybmFtZSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5leGVjKCk7XG5cbiAgICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignQ291bGQgbm90IGZpbmQgY3VycmVudCB1c2VyIHdpdGggcG9wdWxhdGVkIGRhdGEnKTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgbG9hZGluZyB1c2VyIGRhdGEnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlcXVlc3RUb1JlbW92ZTtcbiAgICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICAgIC8vIEZpbmQgYnkgSURcbiAgICAgICAgICByZXF1ZXN0VG9SZW1vdmUgPSBjdXJyZW50VXNlci5mcmllbmRSZXF1ZXN0cy5maW5kKFxuICAgICAgICAgICAgcmVxdWVzdCA9PiByZXF1ZXN0LmZyb20uX2lkLnRvU3RyaW5nKCkgPT09IHVzZXJJZFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRmluZCBieSB1c2VybmFtZVxuICAgICAgICAgIHJlcXVlc3RUb1JlbW92ZSA9IGN1cnJlbnRVc2VyLmZyaWVuZFJlcXVlc3RzLmZpbmQoXG4gICAgICAgICAgICByZXF1ZXN0ID0+IHJlcXVlc3QuZnJvbS51c2VybmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gdXNlcm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlcXVlc3RUb1JlbW92ZSkge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gZnJpZW5kIHJlcXVlc3QgZm91bmQgdG8gcmVqZWN0OicsIHsgdXNlcm5hbWUsIHVzZXJJZCB9KTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTm8gZnJpZW5kIHJlcXVlc3QgZm91bmQgZnJvbSB0aGlzIHVzZXInIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdGb3VuZCByZXF1ZXN0IHRvIHJlbW92ZTonLCB7XG4gICAgICAgICAgZnJvbToge1xuICAgICAgICAgICAgaWQ6IHJlcXVlc3RUb1JlbW92ZS5mcm9tLl9pZCxcbiAgICAgICAgICAgIG5hbWU6IHJlcXVlc3RUb1JlbW92ZS5mcm9tLm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogcmVxdWVzdFRvUmVtb3ZlLmZyb20uZW1haWxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcmVxdWVzdFxuICAgICAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgIGN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkcHVsbDogeyBmcmllbmRSZXF1ZXN0czogeyBmcm9tOiByZXF1ZXN0VG9SZW1vdmUuZnJvbS5faWQgfSB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG5ldzogdHJ1ZSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgbG9nZ2VyLmluZm8oJ0ZyaWVuZCByZXF1ZXN0IHJlamVjdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnRnJpZW5kIHJlcXVlc3QgcmVqZWN0ZWQnIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciByZWplY3RpbmcgZnJpZW5kIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgcmVqZWN0aW5nIGZyaWVuZCByZXF1ZXN0JyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQQVRDSDogVXBkYXRlIHVzZXIgKHRlbXBvcmFyeSBlbmRwb2ludCBmb3IgZml4aW5nIGxpbG8ncyB1c2VybmFtZSlcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BBVENIJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oJz09PSBTVEFSVDogVXNlciBVcGRhdGUgPT09Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IGFsbG93IHVwZGF0aW5nIGxpbG8ncyByZWNvcmRcbiAgICAgICAgY29uc3QgbGlsb0lkID0gJzY4NGViYzE3NGVmMWMxZTA2NDcyYjc0Nyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgbGlsb0lkLFxuICAgICAgICAgIHsgXG4gICAgICAgICAgICAkc2V0OiB7IFxuICAgICAgICAgICAgICB1c2VybmFtZTogJ2xpbG9fc3RpdGNoJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgbmV3OiB0cnVlIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXVwZGF0ZWRVc2VyKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdDb3VsZCBub3QgZmluZCBsaWxvXFwncyB1c2VyIHJlY29yZCcpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZXIuaW5mbygnU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgbGlsb1xcJ3MgdXNlcm5hbWUnKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXJuYW1lIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBpZDogdXBkYXRlZFVzZXIuX2lkLFxuICAgICAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1cGRhdGVkVXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB1cGRhdGVkVXNlci5lbWFpbFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgdXBkYXRpbmcgdXNlcicgfSk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZyaWVuZHMgb3BlcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgcHJvY2Vzc2luZyBmcmllbmRzIG9wZXJhdGlvbicgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd2l0aEF1dGgoXG4gIHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgcmV0dXJuIGF1dGhNaWRkbGV3YXJlKHJlcSwgcmVzLCAoKSA9PiBoYW5kbGVyKHJlcSwgcmVzKSk7XG59ICJdLCJuYW1lcyI6WyJkYkNvbm5lY3QiLCJVc2VyIiwiYXV0aE1pZGRsZXdhcmUiLCJsb2dnZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsImluY2x1ZGVzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsIkVycm9yIiwidXNlciIsIl9pZCIsInVzZXJFeGlzdHMiLCJmaW5kQnlJZCIsInVzZXJXaXRoRGF0YSIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsImxlYW4iLCJmcmllbmRzIiwiZmlsdGVyIiwiZnJpZW5kIiwibWFwIiwiaWQiLCJ0b1N0cmluZyIsIm5hbWUiLCJ1c2VybmFtZSIsImVtYWlsIiwibGFzdENoZWNrSW4iLCJsZW5ndGgiLCJmcmllbmRSZXF1ZXN0cyIsInJlcXVlc3QiLCJmcm9tIiwiY3JlYXRlZEF0IiwiYm9keSIsImZpbmRPbmUiLCJ0b0xvd2VyQ2FzZSIsImFyZUZyaWVuZHMiLCJzb21lIiwiZnJpZW5kSWQiLCJleGlzdGluZ1JlcXVlc3QiLCJmaW5kIiwidGhlaXJSZXF1ZXN0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCIkcHVzaCIsIkRhdGUiLCJuZXciLCJpbmZvIiwiZGVidWciLCJjdXJyZW50VXNlciIsImV4ZWMiLCJwZW5kaW5nUmVxdWVzdCIsImF2YWlsYWJsZVJlcXVlc3RzIiwiciIsInJlcXVlc3RlZFVzZXJuYW1lIiwidXBkYXRlZFVzZXIiLCJQcm9taXNlIiwiYWxsIiwiJHB1bGwiLCJ1cGRhdGVFcnJvciIsInVzZXJJZCIsInJlcXVlc3RUb1JlbW92ZSIsImxpbG9JZCIsIiRzZXQiLCJ3aXRoQXV0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/user/friends.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Ffriends&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cuser%5Cfriends.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();